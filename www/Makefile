#PUBHOST=rigel.cc.gatech.edu
#PUBDIR=www/classes/CS7260-SP06
RDEPS= ../include/weblib.rb
SRCS = index.html syllabus.html  readinglist.html

#all: publish
all: local

publish: local
	scp $(SRCS) Makefile $(PUBHOST):$(PUBDIR)

local: $(SRCS)

# Readinglist is generated by mklectures now
#readinglist.srhtml: class.bib readinglist.head readinglist.tail
#	../bin/bibparse.rb

syllabus.srhtml: lectures.txt syllabus.head syllabus.tail
	../bin/mklectures.rb > syllabus.srhtml

index.html: index.srhtml
	erb -T 2 -r ../include/weblib.rb index.srhtml > index.html

syllabus.html: syllabus.srhtml
	erb -T 2 -r ../include/weblib.rb syllabus.srhtml > syllabus.html

readinglist.html: readinglist.srhtml
	erb -T 2 -r ../include/weblib.rb readinglist.srhtml > readinglist.html

clean:
	rm -f $(SRCS) syllabus.srhtml

SUFFIXES: .html .srhtml

.srhtml.html: ${RDEPS}
	erb -T 2 $< > $@

